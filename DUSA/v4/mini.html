<!DOCTYPE html>
<!-- This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/4.0/ -->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Data Updates & Sharing Application</title>

        <link rel="stylesheet" href="http://js.arcgis.com/3.16/dijit/themes/tundra/tundra.css"><!-- swamp thang -->
        <link rel="stylesheet" href="http://js.arcgis.com/3.16/esri/css/esri.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

        <style type="text/css">
            html, body, #divMap {
                padding: 0;
                margin: 0;
                height: 100%;
            }
            #info {
                position: absolute;
                bottom: 1px;
                left: 20px;
                z-index: 50;
                color: #303030;
                text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;
            }
            #logoff {
                position: absolute;
                top: 3px;
                right: 5px;
                z-index: 50;
                padding: 0 6px 0 6px;
                background: rgba(0, 0, 0, .1);
            }
            #user {
                position: absolute;
                bottom: 18px;
                left: 20px;
                z-index: 50;
                color: #303030;
                text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;
            }
            #basemapTrigger {
                position: absolute;
                bottom: 0;
                width: 8%;
                padding-top: 1px;
                padding-bottom: 0;
                left: 46%;
                z-index: 51;
            }
            #basemapTrigger:focus {
                outline:0px !important;
            }
            #basemapPanel {
                position:absolute;
                bottom:0;
                display:none;
                padding-left:30px;
                padding-right: 30px;
                margin:0 auto;
                background: rgb(0, 0, 0);
                background: rgba(0, 0, 0, 0.5);
                width: 100%;
                z-index: 50;
                overflow: hidden;
            }
            .basemapItem {
                height: 100%;
                margin-top:10px;
                text-align: center;
                cursor: pointer;

                padding-left: 0;
                padding-right: 0;
                margin-left: 2.5%;
                margin-right: 2.5%;
            }
            .basemapImg {
                width:65%;
                max-height:133px;
            }
            .col-md-3 {
                width: 20%;
                float: left;
            }
            div:focus {
                outline:0px !important;
            }
            select {
                cursor: pointer;
            }
            a {
                color: rgb(20, 56, 92);
            }
            

            /* Menu */
            #homeBtn {
                position: absolute;
                top: 90px;
                left: 20px;
                width: 33px;
                z-index: 50;
                padding-left: 3px;
                padding-right: 3px;
                padding-top: 6px;
                padding-bottom: 4px;
                margin: 0;
                /*border-color: black;*/
            }
            #menuBtn {
                position: absolute;
                top: 130px;
                left: 20px;
                width: 33px;
                z-index: 50;
                padding-left: 3px;
                padding-right: 3px;
                padding-top: 6px;
                padding-bottom: 4px;
                margin: 0;
                /*border-color: black;*/
            }
            #menuContainer {
                position: absolute;
                top: 160px;
                left: 15px;
                z-index: 50;
                padding: 0;
                margin: 0;
                width: 200px;
            }
            #menuPanel {
                position:absolute;
                display:none;
                padding:5px;
                margin:5px;
                background: rgb(0, 0, 0);
                background: rgba(0, 0, 0, 0.5);
                border: 1px solid #ccc;
                border-radius: 5px;
            }
            #accordion {
                margin-bottom: 0;
            }
            #downloadFormat, #chooseData, #chooseUpload {
                padding: 0;
            }
            .panel-default > .panel-heading {
                cursor: pointer;
                background-color: rgb(20, 56, 92);
                color:#FFFFFF;
                border-radius: 4px 4px 0px 0px;
            }
            .panel-heading.collapsed {
                background-color: #C2C4C5;
                border-color: #C2C4C5;
            }
            .btn-file {
                position: relative;
                overflow: hidden;
            }
            .btn-file input[type=file] {
                position: absolute;
                top: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                font-size: 100px;
                text-align: right;
                opacity: 0;
                outline: none;
                background: white;
                cursor: inherit;
                display: block;
            }
            .btn-primary:hover{
                background-color: rgb(137, 155, 173);
            }
            .btn-primary{
                background-color: rgb(20, 56, 92);
            }
            span.dijit.dijitReset.dijitInline.dijitButton.atiButton.atiDeleteButton {
                margin: .2em;
                width: 50px;
            }
            .dojoxGridContent {
                margin: auto;
            }
            .helpButton{
                text-align: center;
                border: 1px solid #0649FB;
                background: rgba(0, 0, 0, .1);
                color: #0649FB;
                border-radius: 20px;
                width: 20px;
                height: 20px;
                font-size: 10px;
                z-index: 51;
                font-weight: bold;
                margin-top: 10px;
            }

            /*loading spinner*/
            .glyphicon-refresh-animate {
                -animation: spin .7s infinite linear;
                -webkit-animation: spin2 .7s infinite linear;
            }
            @-webkit-keyframes spin2 {
                from { -webkit-transform: rotate(0deg);}
                to { -webkit-transform: rotate(360deg);}
            }
            @keyframes spin {
                from { transform: scale(1) rotate(0deg);}
                to { transform: scale(1) rotate(360deg);}
            }
        
        </style>

        <script data-dojo-config="async:true, aliases: [
            ['jquery', 'http://code.jquery.com/jquery-2.1.4.min.js'],
            ['jqueryui', 'http://code.jquery.com/ui/1.11.4/jquery-ui.min.js'],
            ['bootstrap', 'http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js']
            ]" src="http://js.arcgis.com/3.16/">
        </script><!-- swamp thang -->

        <script>
            require(["jquery","jqueryui","esri/map","esri/graphic","esri/geometry/Geometry","esri/toolbars/edit","esri/toolbars/draw","esri/geometry/Extent","esri/geometry/Point","esri/dijit/BasemapLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/request","esri/geometry/scaleUtils","esri/geometry/webMercatorUtils","esri/geometry/geodesicUtils","esri/config","esri/tasks/query","esri/tasks/QueryTask","esri/tasks/Geoprocessor","esri/layers/FeatureLayer","esri/dijit/Basemap","esri/dijit/BasemapGallery","esri/tasks/GeometryService","esri/units","esri/dijit/Legend","esri/dijit/editing/TemplatePicker","esri/dijit/AttributeInspector","esri/InfoTemplate","esri/renderers/SimpleRenderer","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/Color","dojo/ready","dojo/parser","dojo/require","dojo/sniff","dojo/dom","dojo/on","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dijit/form/Button","dojo/domReady!"],function(e,t,a,o,i,r,n,l,s,c,d,u,p,f,m,g,h,y,b,v,S,E,w,N,D,T,M,C,L,I,A,_,O,R,x,U,F,k,G,P,H,j,q){O(function(){function t(e){var t=f.webMercatorToGeographic(e.mapPoint);document.getElementById("info").innerHTML="Level: "+me.getZoom()+", "+t.x.toFixed(6)+", "+t.y.toFixed(6)}function i(){function t(e){var t=G.map(e.features,function(e){return e});ie=t[0].geometry.getExtent().expand(1.15),me.setExtent(ie)}e("#menuPanel").slideToggle();var a,o,i,r,n=new h;if("CR"==X){r="CNTY_NBR = "+$,Se.setDefinitionExpression("SOURCE = '"+$+"'"),be.setDefinitionExpression(r),we.setDefinitionExpression("CNTY_NBR = '"+$+"'"),me.addLayers([be,we,Se]);var l=e("#selectOrg option[value='"+$+"']").text(),s=l.split(" - "),c=s[0],d=c.toUpperCase();e("#resources").append("<a>&bull; </a><a href='./ApplicationInstructions.pdf' target='Instructions' title='How to use this Webmap'>Instructions</a><br><a>&bull; </a><a href='./DataDictionary.pdf' target='DataDictionary' title='Schema Data Dictionary for all Datasets within this App'>Data Dictionary</a><br><a>&bull; </a><a href='./COUNTY_ROAD_CRITERIA.pdf' target='CRI Criteria' title='TxDOT Definition of a County Road'>Criteria</a><br><a>&bull; </a><a href='ftp://ftp.dot.state.tx.us/pub/txdot-info/tpp/countyfiles/2016/"+d+"_2016.zip' id='FTPlink' target='Download' title='Download CRI Zipfile Packet for Selected County'>Download Packet</a>");var u=new y(ye);n.where=r,n.returnGeometry=!0,u.execute(n,t),a=[{layer:we,defaultSymbol:!1,title:"Surface Type"},{layer:be,defaultSymbol:!1,title:"Active County"}],o=[Se],te=[Se,we],ae=ve,i=[{featureLayer:Se,showAttachments:!1,isEditable:!0,fieldInfos:[{fieldName:"SOURCE",label:"Source (County Number)",isEditable:!1},{fieldName:"LENGTH",label:"Length (Miles)",isEditable:!1},{fieldName:"CHANGE",label:"Update Type",isEditable:!0},{fieldName:"STREET_NM",label:"Full Street Name"},{fieldName:"DESIGN",label:"Roadway Design"},{fieldName:"SURFACE",label:"Surface Type"},{fieldName:"NUM_LANES",label:"Number of Lanes"},{fieldName:"COMMENT",label:"Comment"}]},{featureLayer:we,showAttachments:!1,isEditable:!1,fieldInfos:[{fieldName:"CNTY_NBR",label:"County Number"},{fieldName:"CNTY_NM",label:"County Name"},{fieldName:"LENGTH",label:"Length (Miles)"},{fieldName:"ROUTE_ID",label:"Route Identifier"},{fieldName:"STREET_NM",label:"Full Street Name"},{fieldName:"DESIGN",label:"Roadway Design"},{fieldName:"SURFACE",label:"Surface Type"},{fieldName:"NUM_LANES",label:"Number of Lanes"}]}]}else if("LS"==X){r="ACRNM = '"+$+"'",Me.setDefinitionExpression("SOURCE = '"+$+"'"),De.setDefinitionExpression(r),"CSEC"!==$?Le.setDefinitionExpression("ADMN_ACRNM = '"+$+"' OR DIST_ACRNM = '"+$+"' OR COG_ACRNM = '"+$+"'"):Le.setDefinitionExpression("ADMN_ACRNM <> 'MDA911'"),me.addLayers([De,Le,Me]),e("#resources").append("<a>&bull; </a><a href='./ApplicationInstructions.pdf' target='Instructions' title='How to use this Webmap'>Instructions</a><br><a>&bull; </a><a href='./DataDictionary.pdf' target='DataDictionary' title='Schema Data Dictionary for all Datasets within this App'>Data Dictionary</a><br><a>&bull; </a><a href='./LOCAL_STREETS_CRITERIA.pdf' target='LS Criteria' title='TxDOT Definition of a Local Street'>Criteria</a>");var u=new y(Ne);n.where=r,n.returnGeometry=!0,u.execute(n,t),a=[{layer:Le,defaultSymbol:!1,title:"Local Streets"},{layer:De,defaultSymbol:!1,title:"Data Maintenance Area"}],o=[Me],te=[Me,Le],ae=Te,i=[{featureLayer:Me,showAttachments:!1,isEditable:!0,fieldInfos:[{fieldName:"SOURCE",label:"Source (Primary Admin)",isEditable:!1},{fieldName:"LENGTH",label:"Length (Miles)",isEditable:!1},{fieldName:"CHANGE",label:"Update Type",isEditable:!0},{fieldName:"STREET_NM",label:"Full Street Name"},{fieldName:"DESIGN",label:"Roadway Design"},{fieldName:"SURFACE",label:"Surface Type"},{fieldName:"NUM_LANES",label:"Number of Lanes"},{fieldName:"COMMENT",label:"Comment"}]},{featureLayer:Le,showAttachments:!1,isEditable:!1,fieldInfos:[{fieldName:"PRIME_ADMN",label:"Primary Admin"},{fieldName:"ADMN_ACRNM",label:"Admin Abbrev."},{fieldName:"ADMN_TYPE",label:"Admin Type"},{fieldName:"COG_NM",label:"COG"},{fieldName:"TxDOT_DIST",label:"TxDOT District"},{fieldName:"LENGTH",label:"Length (Miles)"},{fieldName:"ROUTE_ID",label:"Route Identifier"},{fieldName:"STREET_NM",label:"Full Street Name"},{fieldName:"DESIGN",label:"Roadway Design"},{fieldName:"SURFACE",label:"Surface Type"},{fieldName:"NUM_LANES",label:"Number of Lanes"}]}]}I(a),O(o),j(i)}function C(){e.each(te,function(e,t){var a=new A(A.STYLE_SOLID,new _([0,255,255]),2);t.setSelectionSymbol(a);var o=t.on("mouse-over",function(){me.setMapCursor("pointer")}),i=t.on("mouse-out",function(){me.setMapCursor("default")});se.push(o),se.push(i)});var t=te[0].on("click",x),a=te[1].on("click",x);se.push(t),se.push(a),me.enableDoubleClickZoom()}function L(){e.each(se,function(e,t){t.remove()}),me.disableDoubleClickZoom()}function I(e){var t=new D({map:me,layerInfos:e,respectCurrentMapScale:!0},"legend");t.startup()}function O(t){var a=new T({featureLayers:t,grouping:!1,columns:1,emptyMessage:"Nothing to edit"},"editTemplate");a.startup(),document.getElementById("dojox_grid__View_2").style.width="100%";var i,r=new n(me);a.on("selection-change",function(){te[0].clearSelection(),te[1].clearSelection(),me.infoWindow.hide(),a.getSelected()?(i=a.getSelected(),r.activate(n.POLYLINE),me.setMapCursor("crosshair"),L()):(r.deactivate(),me.setMapCursor("default"),C())}),r.on("draw-end",function(e){r.deactivate(),me.setMapCursor("default"),C();var t,n=f.webMercatorToGeographic(e.geometry),l=m.geodesicLengths([n],N.MILES),s=parseFloat(l).toFixed(3),c=P.mixin({},i.template.prototype.attributes);t=P.mixin(c,{SOURCE:$,LENGTH:s,UPDATE_DT:fe});var d=new o(e.geometry,null,t);i.featureLayer.applyEdits([d],null,null),a.clearSelection()}),e("#collapseOne").removeClass("in"),e("#collapseOneHdr").addClass("collapsed"),e("#collapseFour").addClass("in"),e("#collapseFourHdr").removeClass("collapsed"),B()}function x(e){te[0].clearSelection(),te[1].clearSelection();var t=new s(e.mapPoint.x,e.mapPoint.y,e.mapPoint.spatialReference),a=me.extent.getWidth(),o=a/me.width,i=5*o,r=new l(1,1,i,i,e.mapPoint.spatialReference),n=new h;n.geometry=r.centerAt(t),te[0].selectFeatures(n,v.SELECTION_NEW,function(t){t.length>0?(me.infoWindow.setTitle("Inventory Changes"),me.infoWindow.show(e.screenPoint,me.getInfoWindowAnchor(e.screenPoint)),document.getElementById("dijit_form_Button_5").parentElement.style.display="block"):te[1].selectFeatures(n,v.SELECTION_NEW,function(t){t.length>0?(me.infoWindow.setTitle("Current Inventory"),me.infoWindow.show(e.screenPoint,me.getInfoWindowAnchor(e.screenPoint)),document.getElementById("dijit_form_Button_5").parentElement.style.display="none"):me.infoWindow.hide()})})}function j(e){C(),oe=new M({layerInfos:e},H.create("div"));var t=new q({label:"Edit Geometry"},H.create("div"));H.place(t.domNode,oe.deleteBtn.domNode,"after"),t.on("click",function(){var e=te[0].getSelectedFeatures(),t=e[0];me.infoWindow.hide(),W(t)}),oe.on("attribute-change",function(e){e.feature.attributes[e.fieldName]=e.fieldValue,te[0].applyEdits(null,[e.feature],null)}),oe.on("delete",function(e){te[0].applyEdits(null,null,[e.feature]),me.infoWindow.hide(),ee.deactivate()}),me.infoWindow.setContent(oe.domNode),me.infoWindow.resize(350,240),me.infoWindow.on("hide",function(){te[0].clearSelection(),te[1].clearSelection()})}function B(){ee=new r(me),ee.on("deactivate",function(e){var t=f.webMercatorToGeographic(e.graphic.geometry),a=m.geodesicLengths([t],N.MILES),o=parseFloat(a).toFixed(3);e.graphic.attributes.SOURCE=$,e.graphic.attributes.LENGTH=o,e.graphic.attributes.UPDATE_DT=fe,te[0].applyEdits(null,[e.graphic],null)}),me.on("click",function(e){ee.deactivate(),"graphic"in e||(me.infoWindow.hide(),te[0].clearSelection(),te[1].clearSelection())})}function W(e){var t=new A(A.STYLE_SOLID,new _([201,201,201]),2),a={allowAddVertices:!0,allowDeleteVertices:!0,ghostLineSymbol:t};ee.activate(r.EDIT_VERTICES,e,a)}function Y(t){var a=t.split(".");a=a[0].replace("c:\\fakepath\\",""),F.byId("upload-status").innerHTML="<p style='text-align:left;'><span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span><b> Loading: </b>"+a+"</p>";var o={name:a,targetSR:me.spatialReference,maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},i=p.getExtentForScale(me,4e4),r=i.getWidth()/me.width;o.generalize=!0,o.maxAllowableOffset=r,o.reducePrecision=!0,o.numberOfDigitsAfterDecimal=0;var n={filetype:"shapefile",publishParameters:JSON.stringify(o),f:"json","callback.html":"textarea"},l="http://www.arcgis.com";u({url:l+"/sharing/rest/content/features/generate",content:n,form:F.byId("uploadForm"),handleAs:"json",load:P.hitch(this,function(t){if(t.error)return void Z(t.error);var a=t.featureCollection.layers[0].layerDefinition.name;F.byId("upload-status").innerHTML="<p style='text-align:left;'><b>Loaded: </b>"+a+"</p>","UPLOAD"==e("#chooseUpload").val()?z(t.featureCollection):"DISPLAY"==e("#chooseUpload").val()&&(Q(t.featureCollection),F.byId("uploadMarquee").innerHTML='<p style="color:black">Shapefile added to the map only and has not been submitted as an inventory update.</p>',e("#clearDisplay").attr("style","display:block;margin:auto;"))}),error:P.hitch(this,Z)})}function Z(e){F.byId("uploadMarquee").innerHTML='<p style="color:red">?'+e.message+"</p>"}function z(e){var t,a=["SOURCE","UPDATE_DT","LENGTH","CHANGE","STREET_NM","DESIGN","SURFACE","NUM_LANES","COMMENT"],o=!1,i=!1;G.forEach(e.layers,function(e){G.forEach(e.featureSet.features,function(e){G.forEach(a,function(t){if(t in e.attributes){var a=e.attributes[t];(void 0==a||null==a||" "==a||""==a)&&(e.attributes[t]=0)}else o=!0})})}),o?(alert("Shapefile does not contain all required fields."),F.byId("uploadMarquee").innerHTML='<p style="color:red">Shapefile does not contain all required fields.<br><p style="font-size: xx-small;">Updates can only be uploaded via the schema template shapefile acquired from the Download section of this menu.</p></p>'):i?(alert(t+" has a NULL or blank value which must be populated."),F.byId("uploadMarquee").innerHTML='<p style="color:red">'+t+" has a NULL or blank value which must be populated.</p>"):(F.byId("uploadMarquee").innerHTML='<p style="color:green">Submited shapefile has passed field requirement checks.</p>',Q(e),J(e))}function Q(e){var t;re=[],G.forEach(e.layers,function(e){var a=new v(e);t=t?t.union(a.fullExtent):a.fullExtent,re.push(a),le.push(a);var o=[];G.forEach(e.layerDefinition.fields,function(e){o.push({fieldname:e.name,label:e.name})})}),G.forEach(re,function(e){me.addLayer(e,0)}),me.setExtent(t.expand(1.25),!0)}function J(e){var t=ae+"/applyEdits?f=json&adds=";G.forEach(e.layers,function(e){var a=e.featureSet.features.length,o=0;G.forEach(e.featureSet.features,function(e){var i,r=e.geometry,n=JSON.stringify(r.paths),l=f.webMercatorToGeographic(r),s=m.geodesicLengths([l],N.MILES),c=parseFloat(s).toFixed(3),d=e.attributes.CHANGE;0==d&&(d="Update"),i="{'geometry':{'paths':"+n+"},'attributes':{'SOURCE':'"+$+"','UPDATE_DT':'"+fe.toString()+"','LENGTH':"+c.toString()+",'CHANGE':'"+d+"','STREET_NM':'"+e.attributes.STREET_NM+"','DESIGN':'"+e.attributes.DESIGN+"','SURFACE':'"+e.attributes.SURFACE+"','NUM_LANES':"+e.attributes.NUM_LANES+",'COMMENT':'"+e.attributes.COMMENT+"'}}",i=t+"["+i+"]";var p=u({url:i},{usePost:!0});p.then(function(e){o+=1,F.byId("uploadMarquee").innerHTML='<p style="color:green">'+o.toString()+" of "+a.toString()+" records uploaded to service.</p>",o===a&&(F.byId("uploadMarquee").innerHTML='<p style="color:green">All records uploaded to service.</p>',G.forEach(re,function(e){me.removeLayer(e)}),te[0].redraw())},function(e){console.log("Ugh Error: ",e),F.byId("uploadMarquee").innerHTML='<p style="color:red">Uh-oh! Seems to be some kind of error: </p>'+e})})})}function K(){G.forEach(le,function(e){me.removeLayer(e)}),le=[],e("#clearDisplay").attr("style","display:none;")}function V(t){e("#loginModal").modal({show:!0,keyboard:!1,backdrop:"static"})}dojo.require("bootstrap");var X,$,ee,te,ae,oe,ie,re,ne,le=[],se=[],ce=new Date,de=ce.getMonth()+1,ue=ce.getDate(),pe=ce.getFullYear(),fe=de.toString()+"/"+ue.toString()+"/"+pe.toString();R.parse(),g.defaults.io.proxyUrl="http://localhost/proxy/proxy.ashx";var me=(new w("http://txapp38/arcgis/rest/services/Utilities/Geometry/GeometryServer"),new a("divMap",{center:[-100,32],zoom:7,logo:!1,showLabels:!0}));tiled=new d("http://tiles.arcgis.com/tiles/KTcxiTD9dsQw4r7Z/arcgis/rest/services/Statewide_Planning_Map/MapServer"),me.addLayer(tiled);var ge=[];ge.push(new S({id:"spm",title:"TxDOT Planning Map",thumbnailUrl:"http://www.arcgis.com/sharing/rest/content/items/87a5fd8e8ff84e969b0265ec5c326993/info/thumbnail/StatewidePlanningMap.png",layers:[tiled]})),ge.push(new S({id:"imagery",title:"Imagery",thumbnailUrl:"http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/GUID-D644D704-818F-48EA-BB2F-449A3059634C-web.jpg",layers:[new c({url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"})]})),ge.push(new S({id:"topo",title:"Topographic",thumbnailUrl:"http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/GUID-67355224-9211-470F-99A0-8C28528F0D62-web.jpg",layers:[new c({url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"})]})),ge.push(new S({id:"street",title:"Open Street Map",thumbnailUrl:"http://www.arcgis.com/sharing/rest/content/items/b834a68d7a484c5fb473d4ba90d35e71/info/thumbnail/osm.jpg",layers:[new c({url:"http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"})]}));var he=new E({showArcGISBasemaps:!1,basemaps:ge,map:me});e.each(he.basemaps,function(t,a){var o=a.thumbnailUrl,i=a.title,r=a.id;e("#basemapGallery").append("<div class='col-md-3 basemapItem' id='"+r+"'><img class='basemapImg' id='"+r+"' src='"+o+"'><p id='"+r+"' style='color:white;text-shadow: 1px 0 0 #000, 0 -1px 0 #000, 0 1px 0 #000, -1px 0 0 #000;'>"+i+"</p></div>")}),e(".col-md-3.basemapItem").click(function(e){var t=e.target.id;he.select(t)});var ye="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/CountyRoads_Poly/FeatureServer/0",be=new v(ye,{mode:v.MODE_ONDEMAND,opacity:.5,showLabels:!1,outFields:["CNTY_NM","CNTY_NBR"]}),ve="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/CountyRoads_Updates/FeatureServer/0",Se=new v(ve,{mode:v.MODE_ONDEMAND,showLabels:!0,outFields:["*"]}),Ee="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/CountyRoads_DUSA/FeatureServer/0",we=new v(Ee,{id:"CR",mode:v.MODE_ONDEMAND,showLabels:!0,outFields:["*"]}),Ne="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/LocalStreets_Poly/FeatureServer/0",De=new v(Ne,{mode:v.MODE_ONDEMAND,opacity:.5,showLabels:!1,outFields:["*"]}),Te="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/LocalStreets_Updates/FeatureServer/0",Me=new v(Te,{mode:v.MODE_ONDEMAND,showLabels:!0,outFields:["*"]}),Ce="http://services.arcgis.com/KTcxiTD9dsQw4r7Z/arcgis/rest/services/LocalStreets_DUSA/FeatureServer/0",Le=new v(Ce,{id:"LS",mode:v.MODE_ONDEMAND,showLabels:!0,outFields:["*"]});me.on("load",function(){me.on("mouse-move",t),me.on("mouse-drag",t)}),me.on("zoom-end",function(){var t=e("#info").html(),a=", "+t.split(",")[1]+", "+t.split(",")[2];e("#info").html("Level: "+me.getZoom()+a);var o=me.getZoom(),i=he.getSelected();(null==i||"spm"==i.id)&&o>16?(he.select("imagery"),ne="spm"):(null==i||"imagery"==i.id)&&"spm"==ne&&17>o?(he.select("spm"),ne=""):"spm"!=ne&&(ne="")}),k(F.byId("download"),"click",function(){function t(e){"esriJobFailed"!==e.jobStatus&&i.getResultData(e.jobId,"OUTPUT",o)}function a(e){var t=e.jobStatus;F.byId("downloadMarquee").innerHTML="<br><p style='color:black'><span class='glyphicon glyphicon-refresh glyphicon-refresh-animate'></span> Preparing the download...<br>This may take several minutes for large datasets.</p>","esriJobFailed"===t?(F.byId("downloadMarquee").innerHTML="<br><p style='color:red'>Uh-oh... Something went wrong.</p>",console.log(e)):"esriJobSucceeded"===t&&(F.byId("downloadMarquee").innerHTML="<br><p style='color:green'>Success!</p>")}function o(e){me.graphics.clear(),console.log(e);var t=e.value.url;window.location=t}var i=new b("http://maps.dot.state.tx.us/arcgis/rest/services/TPPuser/DUSA_Download/GPServer/Download"),r={UpdateClass:X,Organization:$,DownloadFormat:e("#downloadFormat").val(),ChooseData:e("#chooseData").val()};console.log(r),F.byId("downloadMarquee").innerHTML="Started...",i.submitJob(r,t,a,function(e){console.log(e),F.byId("downloadMarquee").innerHTML="<p style='color:red'>There was an error.</p>"})}),k(F.byId("uploadForm"),"change",function(e){F.byId("uploadMarquee").innerHTML="";var t=e.target.value.toLowerCase();if(U("ie")){var a=t.split("\\");t=a[a.length-1]}-1!==t.indexOf(".zip")?(Y(t),F.byId("uploadFile").value=""):F.byId("upload-status").innerHTML='<p style="color:red">Add shapefile as .zip file</p>'}),e("#needHelp").click(function(){e("#popHelp").toggle("fast")}),e("#homeBtn").click(function(){me.setExtent(ie)}),e("#menuBtn").click(function(){e("#menuPanel").slideToggle("fast"),e("#menuArrow").toggleClass("glyphicon-chevron-up glyphicon-chevron-down")}),e("#basemapTrigger").click(function(){e("#basemapPanel").slideToggle("fast"),e("#basemapArrow").toggleClass("glyphicon-chevron-up glyphicon-chevron-down")}),e("#logoff").click(function(){location.reload()}),e("#clearDisplay").click(K),e("#signIn").submit(function(t){t.preventDefault();var a=e("#inventoryClass").val(),o=e("#selectOrg").val(),r=e("#accessCode").val();null!=a?null!=o?"CR"==a?"porksoda"==r?e("#userAgreement").is(":checked")?(e("#loginModal").modal("hide"),X=a,$=o,i(),e("#user").html(e("#selectOrg option[value='"+$+"']").text())):alert("You must check the user agreement to continue."):(alert("Invalid access code."),e("#accessCode").val(""),e("#signInButton").prop("disabled",!0),e("#agreementDiv").attr("style","display:none;")):"LS"==a&&("raindogs"==r?e("#userAgreement").is(":checked")?(e("#loginModal").modal("hide"),X=a,$=o,i(),e("#user").html(e("#selectOrg option[value='"+$+"']").text())):alert("You must check the user agreement to continue."):(alert("Invalid access code."),e("#accessCode").val(""),e("#signInButton").prop("disabled",!0),e("#agreementDiv").attr("style","display:none;"))):alert("You must choose 'Your Organization' to continue."):alert("You must choose an 'Inventory to Update' to continue.")}),e("#inventoryClass").change(function(){e("#selectOrg").prop("disabled",!1),e("#selectOrg").val("#");var t=e("#inventoryClass").val();"CR"==t?(e(".crOption").attr("style","display:block;"),e(".lsOption").attr("style","display:none;")):"LS"==t&&(e(".crOption").attr("style","display:none;"),e(".lsOption").attr("style","display:block;")),e("#accessCode").prop("disabled",!0),e("#signInButton").prop("disabled",!0),e("#accessCode").val(""),e("#agreementDiv").attr("style","display:none;")}),e("#selectOrg").change(function(){e("#accessCode").prop("disabled",!1)}),e("#accessCode").on("input",function(){var t=e("#accessCode").val();""!=t?(e("#signInButton").prop("disabled",!1),e("#agreementDiv").attr("style","display:block;")):(e("#signInButton").prop("disabled",!0),e("#agreementDiv").attr("style","display:none;"))}),e("#chooseData").change(function(){var t=e("#chooseData").val();"DATA"==t?e("#downloadFormat").prop("disabled",!1):"SCHEMA"==t&&(e("#downloadFormat").prop("disabled",!0),e("#downloadFormat").val("SHP").change())}),e(window).load(V)})});
        </script>
    </head>
    <body class="tundra">
        <div id="loginModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="text-center">Data Updates & Sharing Application</h1>
                        <h3 class="text-center">Sign-In</h1>
                    </div>
                    <div class="modal-body">
                        <form id="signIn" class="form col-md-12 center-block">
                            <div class="form-group">
                                <select class="form-control input-lg" id="inventoryClass">
                                    <option value="#" disabled selected>Choose an Inventory to Update</option>
                                    <option value="CR">County Roads</option>
                                    <option value="LS">Local Streets</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <select class="form-control input-lg" id="selectOrg" disabled="disabled">
                                    <option value="#" disabled selected>Choose Your Organization</option>
                                    <option class='crOption' value='1' style='display:none;'>Anderson - 1</option> <option class='crOption' value='2' style='display:none;'>Andrews - 2</option> <option class='crOption' value='3' style='display:none;'>Angelina - 3</option> <option class='crOption' value='4' style='display:none;'>Aransas - 4</option> <option class='crOption' value='5' style='display:none;'>Archer - 5</option>    <option class='crOption' value='6' style='display:none;'>Armstrong - 6</option> <option class='crOption' value='7' style='display:none;'>Atascosa - 7</option>  <option class='crOption' value='8' style='display:none;'>Austin - 8</option>    <option class='crOption' value='9' style='display:none;'>Bailey - 9</option>    <option class='crOption' value='10' style='display:none;'>Bandera - 10</option> <option class='crOption' value='11' style='display:none;'>Bastrop - 11</option> <option class='crOption' value='12' style='display:none;'>Baylor - 12</option>  <option class='crOption' value='13' style='display:none;'>Bee - 13</option> <option class='crOption' value='14' style='display:none;'>Bell - 14</option>    <option class='crOption' value='15' style='display:none;'>Bexar - 15</option>   <option class='crOption' value='16' style='display:none;'>Blanco - 16</option>  <option class='crOption' value='17' style='display:none;'>Borden - 17</option>  <option class='crOption' value='18' style='display:none;'>Bosque - 18</option>  <option class='crOption' value='19' style='display:none;'>Bowie - 19</option>   <option class='crOption' value='20' style='display:none;'>Brazoria - 20</option>    <option class='crOption' value='21' style='display:none;'>Brazos - 21</option>  <option class='crOption' value='22' style='display:none;'>Brewster - 22</option>    <option class='crOption' value='23' style='display:none;'>Briscoe - 23</option> <option class='crOption' value='24' style='display:none;'>Brooks - 24</option>  <option class='crOption' value='25' style='display:none;'>Brown - 25</option>   <option class='crOption' value='26' style='display:none;'>Burleson - 26</option>    <option class='crOption' value='27' style='display:none;'>Burnet - 27</option>  <option class='crOption' value='28' style='display:none;'>Caldwell - 28</option>    <option class='crOption' value='29' style='display:none;'>Calhoun - 29</option> <option class='crOption' value='30' style='display:none;'>Callahan - 30</option>    <option class='crOption' value='31' style='display:none;'>Cameron - 31</option> <option class='crOption' value='32' style='display:none;'>Camp - 32</option>    <option class='crOption' value='33' style='display:none;'>Carson - 33</option>  <option class='crOption' value='34' style='display:none;'>Cass - 34</option>    <option class='crOption' value='35' style='display:none;'>Castro - 35</option>  <option class='crOption' value='36' style='display:none;'>Chambers - 36</option>    <option class='crOption' value='37' style='display:none;'>Cherokee - 37</option>    <option class='crOption' value='38' style='display:none;'>Childress - 38</option>   <option class='crOption' value='39' style='display:none;'>Clay - 39</option>    <option class='crOption' value='40' style='display:none;'>Cochran - 40</option> <option class='crOption' value='41' style='display:none;'>Coke - 41</option>    <option class='crOption' value='42' style='display:none;'>Coleman - 42</option> <option class='crOption' value='43' style='display:none;'>Collin - 43</option>  <option class='crOption' value='44' style='display:none;'>Collingsworth - 44</option>   <option class='crOption' value='45' style='display:none;'>Colorado - 45</option>    <option class='crOption' value='46' style='display:none;'>Comal - 46</option>   <option class='crOption' value='47' style='display:none;'>Comanche - 47</option>    <option class='crOption' value='48' style='display:none;'>Concho - 48</option>  <option class='crOption' value='49' style='display:none;'>Cooke - 49</option>   <option class='crOption' value='50' style='display:none;'>Coryell - 50</option> <option class='crOption' value='51' style='display:none;'>Cottle - 51</option>  <option class='crOption' value='52' style='display:none;'>Crane - 52</option>   <option class='crOption' value='53' style='display:none;'>Crockett - 53</option>    <option class='crOption' value='54' style='display:none;'>Crosby - 54</option>  <option class='crOption' value='55' style='display:none;'>Culberson - 55</option>   <option class='crOption' value='56' style='display:none;'>Dallam - 56</option>  <option class='crOption' value='57' style='display:none;'>Dallas - 57</option>  <option class='crOption' value='58' style='display:none;'>Dawson - 58</option>  <option class='crOption' value='59' style='display:none;'>Deaf Smith - 59</option>  <option class='crOption' value='60' style='display:none;'>Delta - 60</option>   <option class='crOption' value='61' style='display:none;'>Denton - 61</option>  <option class='crOption' value='62' style='display:none;'>De Witt - 62</option> <option class='crOption' value='63' style='display:none;'>Dickens - 63</option> <option class='crOption' value='64' style='display:none;'>Dimmit - 64</option>  <option class='crOption' value='65' style='display:none;'>Donley - 65</option>  <option class='crOption' value='66' style='display:none;'>Kenedy - 66</option>  <option class='crOption' value='67' style='display:none;'>Duval - 67</option>   <option class='crOption' value='68' style='display:none;'>Eastland - 68</option>    <option class='crOption' value='69' style='display:none;'>Ector - 69</option>   <option class='crOption' value='70' style='display:none;'>Edwards - 70</option> <option class='crOption' value='71' style='display:none;'>Ellis - 71</option>   <option class='crOption' value='72' style='display:none;'>El Paso - 72</option> <option class='crOption' value='73' style='display:none;'>Erath - 73</option>   <option class='crOption' value='74' style='display:none;'>Falls - 74</option>   <option class='crOption' value='75' style='display:none;'>Fannin - 75</option>  <option class='crOption' value='76' style='display:none;'>Fayette - 76</option> <option class='crOption' value='77' style='display:none;'>Fisher - 77</option>  <option class='crOption' value='78' style='display:none;'>Floyd - 78</option>   <option class='crOption' value='79' style='display:none;'>Foard - 79</option>   <option class='crOption' value='80' style='display:none;'>Fort Bend - 80</option>   <option class='crOption' value='81' style='display:none;'>Franklin - 81</option>    <option class='crOption' value='82' style='display:none;'>Freestone - 82</option>   <option class='crOption' value='83' style='display:none;'>Frio - 83</option>    <option class='crOption' value='84' style='display:none;'>Gaines - 84</option>  <option class='crOption' value='85' style='display:none;'>Galveston - 85</option>   <option class='crOption' value='86' style='display:none;'>Garza - 86</option>   <option class='crOption' value='87' style='display:none;'>Gillespie - 87</option>   <option class='crOption' value='88' style='display:none;'>Glasscock - 88</option>   <option class='crOption' value='89' style='display:none;'>Goliad - 89</option>  <option class='crOption' value='90' style='display:none;'>Gonzales - 90</option>    <option class='crOption' value='91' style='display:none;'>Gray - 91</option>    <option class='crOption' value='92' style='display:none;'>Grayson - 92</option> <option class='crOption' value='93' style='display:none;'>Gregg - 93</option>   <option class='crOption' value='94' style='display:none;'>Grimes - 94</option>  <option class='crOption' value='95' style='display:none;'>Guadalupe - 95</option>   <option class='crOption' value='96' style='display:none;'>Hale - 96</option>    <option class='crOption' value='97' style='display:none;'>Hall - 97</option>    <option class='crOption' value='98' style='display:none;'>Hamilton - 98</option>    <option class='crOption' value='99' style='display:none;'>Hansford - 99</option>    <option class='crOption' value='100' style='display:none;'>Hardeman - 100</option>  <option class='crOption' value='101' style='display:none;'>Hardin - 101</option>    <option class='crOption' value='102' style='display:none;'>Harris - 102</option>    <option class='crOption' value='103' style='display:none;'>Harrison - 103</option>  <option class='crOption' value='104' style='display:none;'>Hartley - 104</option>   <option class='crOption' value='105' style='display:none;'>Haskell - 105</option>   <option class='crOption' value='106' style='display:none;'>Hays - 106</option>  <option class='crOption' value='107' style='display:none;'>Hemphill - 107</option>  <option class='crOption' value='108' style='display:none;'>Henderson - 108</option> <option class='crOption' value='109' style='display:none;'>Hidalgo - 109</option>   <option class='crOption' value='110' style='display:none;'>Hill - 110</option>  <option class='crOption' value='111' style='display:none;'>Hockley - 111</option>   <option class='crOption' value='112' style='display:none;'>Hood - 112</option>  <option class='crOption' value='113' style='display:none;'>Hopkins - 113</option>   <option class='crOption' value='114' style='display:none;'>Houston - 114</option>   <option class='crOption' value='115' style='display:none;'>Howard - 115</option>    <option class='crOption' value='116' style='display:none;'>Hudspeth - 116</option>  <option class='crOption' value='117' style='display:none;'>Hunt - 117</option>  <option class='crOption' value='118' style='display:none;'>Hutchinson - 118</option>    <option class='crOption' value='119' style='display:none;'>Irion - 119</option> <option class='crOption' value='120' style='display:none;'>Jack - 120</option>  <option class='crOption' value='121' style='display:none;'>Jackson - 121</option>   <option class='crOption' value='122' style='display:none;'>Jasper - 122</option>    <option class='crOption' value='123' style='display:none;'>Jeff Davis - 123</option>    <option class='crOption' value='124' style='display:none;'>Jefferson - 124</option> <option class='crOption' value='125' style='display:none;'>Jim Hogg - 125</option>  <option class='crOption' value='126' style='display:none;'>Jim Wells - 126</option> <option class='crOption' value='127' style='display:none;'>Johnson - 127</option>   <option class='crOption' value='128' style='display:none;'>Jones - 128</option> <option class='crOption' value='129' style='display:none;'>Karnes - 129</option>    <option class='crOption' value='130' style='display:none;'>Kaufman - 130</option>   <option class='crOption' value='131' style='display:none;'>Kendall - 131</option>   <option class='crOption' value='132' style='display:none;'>Kent - 132</option>  <option class='crOption' value='133' style='display:none;'>Kerr - 133</option>  <option class='crOption' value='134' style='display:none;'>Kimble - 134</option>    <option class='crOption' value='135' style='display:none;'>King - 135</option>  <option class='crOption' value='136' style='display:none;'>Kinney - 136</option>    <option class='crOption' value='137' style='display:none;'>Kleberg - 137</option>   <option class='crOption' value='138' style='display:none;'>Knox - 138</option>  <option class='crOption' value='139' style='display:none;'>Lamar - 139</option> <option class='crOption' value='140' style='display:none;'>Lamb - 140</option>  <option class='crOption' value='141' style='display:none;'>Lampasas - 141</option>  <option class='crOption' value='142' style='display:none;'>La Salle - 142</option>  <option class='crOption' value='143' style='display:none;'>Lavaca - 143</option>    <option class='crOption' value='144' style='display:none;'>Lee - 144</option>   <option class='crOption' value='145' style='display:none;'>Leon - 145</option>  <option class='crOption' value='146' style='display:none;'>Liberty - 146</option>   <option class='crOption' value='147' style='display:none;'>Limestone - 147</option> <option class='crOption' value='148' style='display:none;'>Lipscomb - 148</option>  <option class='crOption' value='149' style='display:none;'>Live Oak - 149</option>  <option class='crOption' value='150' style='display:none;'>Llano - 150</option> <option class='crOption' value='151' style='display:none;'>Loving - 151</option>    <option class='crOption' value='152' style='display:none;'>Lubbock - 152</option>   <option class='crOption' value='153' style='display:none;'>Lynn - 153</option>  <option class='crOption' value='154' style='display:none;'>Madison - 154</option>   <option class='crOption' value='155' style='display:none;'>Marion - 155</option>    <option class='crOption' value='156' style='display:none;'>Martin - 156</option>    <option class='crOption' value='157' style='display:none;'>Mason - 157</option> <option class='crOption' value='158' style='display:none;'>Matagorda - 158</option> <option class='crOption' value='159' style='display:none;'>Maverick - 159</option>  <option class='crOption' value='160' style='display:none;'>McCulloch - 160</option> <option class='crOption' value='161' style='display:none;'>McLennan - 161</option>  <option class='crOption' value='162' style='display:none;'>McMullen - 162</option>  <option class='crOption' value='163' style='display:none;'>Medina - 163</option>    <option class='crOption' value='164' style='display:none;'>Menard - 164</option>    <option class='crOption' value='165' style='display:none;'>Midland - 165</option>   <option class='crOption' value='166' style='display:none;'>Milam - 166</option> <option class='crOption' value='167' style='display:none;'>Mills - 167</option> <option class='crOption' value='168' style='display:none;'>Mitchell - 168</option>  <option class='crOption' value='169' style='display:none;'>Montague - 169</option>  <option class='crOption' value='170' style='display:none;'>Montgomery - 170</option>    <option class='crOption' value='171' style='display:none;'>Moore - 171</option> <option class='crOption' value='172' style='display:none;'>Morris - 172</option>    <option class='crOption' value='173' style='display:none;'>Motley - 173</option>    <option class='crOption' value='174' style='display:none;'>Nacogdoches - 174</option>   <option class='crOption' value='175' style='display:none;'>Navarro - 175</option>   <option class='crOption' value='176' style='display:none;'>Newton - 176</option>    <option class='crOption' value='177' style='display:none;'>Nolan - 177</option> <option class='crOption' value='178' style='display:none;'>Nueces - 178</option>    <option class='crOption' value='179' style='display:none;'>Ochiltree - 179</option> <option class='crOption' value='180' style='display:none;'>Oldham - 180</option>    <option class='crOption' value='181' style='display:none;'>Orange - 181</option>    <option class='crOption' value='182' style='display:none;'>Palo Pinto - 182</option>    <option class='crOption' value='183' style='display:none;'>Panola - 183</option>    <option class='crOption' value='184' style='display:none;'>Parker - 184</option>    <option class='crOption' value='185' style='display:none;'>Parmer - 185</option>    <option class='crOption' value='186' style='display:none;'>Pecos - 186</option> <option class='crOption' value='187' style='display:none;'>Polk - 187</option>  <option class='crOption' value='188' style='display:none;'>Potter - 188</option>    <option class='crOption' value='189' style='display:none;'>Presidio - 189</option>  <option class='crOption' value='190' style='display:none;'>Rains - 190</option> <option class='crOption' value='191' style='display:none;'>Randall - 191</option>   <option class='crOption' value='192' style='display:none;'>Reagan - 192</option>    <option class='crOption' value='193' style='display:none;'>Real - 193</option>  <option class='crOption' value='194' style='display:none;'>Red River - 194</option> <option class='crOption' value='195' style='display:none;'>Reeves - 195</option>    <option class='crOption' value='196' style='display:none;'>Refugio - 196</option>   <option class='crOption' value='197' style='display:none;'>Roberts - 197</option>   <option class='crOption' value='198' style='display:none;'>Robertson - 198</option> <option class='crOption' value='199' style='display:none;'>Rockwall - 199</option>  <option class='crOption' value='200' style='display:none;'>Runnels - 200</option>   <option class='crOption' value='201' style='display:none;'>Rusk - 201</option>  <option class='crOption' value='202' style='display:none;'>Sabine - 202</option>    <option class='crOption' value='203' style='display:none;'>San Augustine - 203</option> <option class='crOption' value='204' style='display:none;'>San Jacinto - 204</option>   <option class='crOption' value='205' style='display:none;'>San Patricio - 205</option>  <option class='crOption' value='206' style='display:none;'>San Saba - 206</option>  <option class='crOption' value='207' style='display:none;'>Schleicher - 207</option>    <option class='crOption' value='208' style='display:none;'>Scurry - 208</option>    <option class='crOption' value='209' style='display:none;'>Shackelford - 209</option>   <option class='crOption' value='210' style='display:none;'>Shelby - 210</option>    <option class='crOption' value='211' style='display:none;'>Sherman - 211</option>   <option class='crOption' value='212' style='display:none;'>Smith - 212</option> <option class='crOption' value='213' style='display:none;'>Somervell - 213</option> <option class='crOption' value='214' style='display:none;'>Starr - 214</option> <option class='crOption' value='215' style='display:none;'>Stephens - 215</option>  <option class='crOption' value='216' style='display:none;'>Sterling - 216</option>  <option class='crOption' value='217' style='display:none;'>Stonewall - 217</option> <option class='crOption' value='218' style='display:none;'>Sutton - 218</option>    <option class='crOption' value='219' style='display:none;'>Swisher - 219</option>   <option class='crOption' value='220' style='display:none;'>Tarrant - 220</option>   <option class='crOption' value='221' style='display:none;'>Taylor - 221</option>    <option class='crOption' value='222' style='display:none;'>Terrell - 222</option>   <option class='crOption' value='223' style='display:none;'>Terry - 223</option> <option class='crOption' value='224' style='display:none;'>Throckmorton - 224</option>  <option class='crOption' value='225' style='display:none;'>Titus - 225</option> <option class='crOption' value='226' style='display:none;'>Tom Green - 226</option> <option class='crOption' value='227' style='display:none;'>Travis - 227</option>    <option class='crOption' value='228' style='display:none;'>Trinity - 228</option>   <option class='crOption' value='229' style='display:none;'>Tyler - 229</option> <option class='crOption' value='230' style='display:none;'>Upshur - 230</option>    <option class='crOption' value='231' style='display:none;'>Upton - 231</option> <option class='crOption' value='232' style='display:none;'>Uvalde - 232</option>    <option class='crOption' value='233' style='display:none;'>Val Verde - 233</option> <option class='crOption' value='234' style='display:none;'>Van Zandt - 234</option> <option class='crOption' value='235' style='display:none;'>Victoria - 235</option>  <option class='crOption' value='236' style='display:none;'>Walker - 236</option>    <option class='crOption' value='237' style='display:none;'>Waller - 237</option>    <option class='crOption' value='238' style='display:none;'>Ward - 238</option>  <option class='crOption' value='239' style='display:none;'>Washington - 239</option>    <option class='crOption' value='240' style='display:none;'>Webb - 240</option>  <option class='crOption' value='241' style='display:none;'>Wharton - 241</option>   <option class='crOption' value='242' style='display:none;'>Wheeler - 242</option>   <option class='crOption' value='243' style='display:none;'>Wichita - 243</option>   <option class='crOption' value='244' style='display:none;'>Wilbarger - 244</option> <option class='crOption' value='245' style='display:none;'>Willacy - 245</option>   <option class='crOption' value='246' style='display:none;'>Williamson - 246</option>    <option class='crOption' value='247' style='display:none;'>Wilson - 247</option>    <option class='crOption' value='248' style='display:none;'>Winkler - 248</option>   <option class='crOption' value='249' style='display:none;'>Wise - 249</option>  <option class='crOption' value='250' style='display:none;'>Wood - 250</option>  <option class='crOption' value='251' style='display:none;'>Yoakum - 251</option>    <option class='crOption' value='252' style='display:none;'>Young - 252</option> <option class='crOption' value='253' style='display:none;'>Zapata - 253</option>    <option class='crOption' value='254' style='display:none;'>Zavala - 254</option>
                                    <option class='lsOption' value='ABLCTY' style='display:none;'>Abilene (CITY)</option>   <option class='lsOption' value='ABL' style='display:none;'>Abilene (DISTRICT)</option>  <option class='lsOption' value='AACOG' style='display:none;'>Alamo Area Council of Governments (COG)</option>   <option class='lsOption' value='AMA' style='display:none;'>Amarillo (DISTRICT)</option> <option class='lsOption' value='ARK-TEX' style='display:none;'>Ark-Tex Council of Governments (COG)</option>    <option class='lsOption' value='ATL' style='display:none;'>Atlanta (DISTRICT)</option>  <option class='lsOption' value='AUS' style='display:none;'>Austin (DISTRICT)</option>   <option class='lsOption' value='BMT' style='display:none;'>Beaumont (DISTRICT)</option> <option class='lsOption' value='BXR911' style='display:none;'>Bexar 911 (E911_COUNTY)</option>  <option class='lsOption' value='BVCOG' style='display:none;'>Brazos Valley Council of Governments (COG)</option>    <option class='lsOption' value='BWD' style='display:none;'>Brownwood (DISTRICT)</option>    <option class='lsOption' value='BRY' style='display:none;'>Bryan (DISTRICT)</option>    <option class='lsOption' value='CLHCO' style='display:none;'>Calhoun (COUNTY)</option>  <option class='lsOption' value='CAPCOG' style='display:none;'>Capital Area Council of Governments (COG)</option> <option class='lsOption' value='CTCOG' style='display:none;'>Central Texas Council of Governments (COG)</option>    <option class='lsOption' value='CHS' style='display:none;'>Childress (DISTRICT)</option>    <option class='lsOption' value='CBCOG' style='display:none;'>Coastal Bend Council of Governments (COG)</option> <option class='lsOption' value="CSEC" style='display:none;'>Comission on State Emergency Communications (STATE)</option> <option class='lsOption' value='CVCOG' style='display:none;'>Concho Valley Council of Governments (COG)</option>    <option class='lsOption' value='CRP' style='display:none;'>Corpus Christi (DISTRICT)</option>   <option class='lsOption' value='DAL' style='display:none;'>Dallas (DISTRICT)</option>   <option class='lsOption' value='DETCOG' style='display:none;'>Deep East Texas Council of Governments (COG)</option> <option class='lsOption' value='ETCOG' style='display:none;'>East Texas Council of Governments (COG)</option>   <option class='lsOption' value='ELP' style='display:none;'>El Paso (DISTRICT)</option>  <option class='lsOption' value='ELPMPO' style='display:none;'>El Paso MPO (MPO)</option>   <option class='lsOption' value='FTW' style='display:none;'>Fort Worth (DISTRICT)</option>   <option class='lsOption' value='GCRPC' style='display:none;'>Golden Crescent Regional Planning Commission (COG)</option>    <option class='lsOption' value='HOTCOG' style='display:none;'>Heart of Texas Council of Governments (COG)</option>  <option class='lsOption' value='HOU' style='display:none;'>Houston (DISTRICT)</option>  <option class='lsOption' value='H-GAC' style='display:none;'>Houston-Galveston Area Council (COG)</option>  <option class='lsOption' value='KRR911' style='display:none;'>Kerr 911 (E911_COUNTY)</option>   <option class='lsOption' value='LRD' style='display:none;'>Laredo (DISTRICT)</option>   <option class='lsOption' value='LRGVDC' style='display:none;'>Lower Rio Grande Valley Development Council (COG)</option>    <option class='lsOption' value='LBBCO' style='display:none;'>Lubbock (COUNTY)</option>  <option class='lsOption' value='LBB' style='display:none;'>Lubbock (DISTRICT)</option>  <option class='lsOption' value='LFK' style='display:none;'>Lufkin (DISTRICT)</option>   <option class='lsOption' value='MLNCO' style='display:none;'>McLennan (COUNTY)</option> <option class='lsOption' value='MDACO' style='display:none;'>Medina (COUNTY)</option>   <option class='lsOption' value='MDA911' style='display:none;'>Medina 911 (E911_COUNTY)</option> <option class='lsOption' value='MRGDC' style='display:none;'>Middle Rio Grande Development Council (COG)</option>   <option class='lsOption' value='MLDCTY' style='display:none;'>Midland (CITY)</option>   <option class='lsOption' value='NORTEX' style='display:none;'>Nortex Regional Planning Commission (COG)</option>    <option class='lsOption' value='NCTCOG' style='display:none;'>North Central Texas Council of Governments (COG)</option> <option class='lsOption' value='ODACTY' style='display:none;'>Odessa (CITY)</option>    <option class='lsOption' value='ODA' style='display:none;'>Odessa (DISTRICT)</option>   <option class='lsOption' value='PRPC' style='display:none;'>Panhandle Regional Planning Commission (COG)</option>   <option class='lsOption' value='PAR' style='display:none;'>Paris (DISTRICT)</option>    <option class='lsOption' value='PBRPC' style='display:none;'>Permian Basin Regional Planning Commission (COG)</option>  <option class='lsOption' value='PHR' style='display:none;'>Pharr (DISTRICT)</option>    <option class='lsOption' value='RGCOG' style='display:none;'>Rio Grande Council of Governments (COG)</option>   <option class='lsOption' value='SJT' style='display:none;'>San Angelo (DISTRICT)</option>   <option class='lsOption' value='SAT' style='display:none;'>San Antonio (DISTRICT)</option>  <option class='lsOption' value='SETRPC' style='display:none;'>South East Texas Regional Planning Commission (COG)</option>  <option class='lsOption' value='SPAG' style='display:none;'>South Plains Association of Governments (COG)</option>  <option class='lsOption' value='STDC' style='display:none;'>South Texas Development Council (COG)</option>  <option class='lsOption' value='TEXOMA' style='display:none;'>Texoma Council of Governments (COG)</option>  <option class='lsOption' value='TYL' style='display:none;'>Tyler (DISTRICT)</option>    <option class='lsOption' value='VTACTY' style='display:none;'>Victoria (CITY)</option>  <option class='lsOption' value='WAC' style='display:none;'>Waco (DISTRICT)</option> <option class='lsOption' value='WCTCOG' style='display:none;'>West Central Texas Council of Governments (COG)</option>  <option class='lsOption' value='WTACO' style='display:none;'>Wichita (COUNTY)</option>  <option class='lsOption' value='WFS' style='display:none;'>Wichita Falls (DISTRICT)</option>    <option class='lsOption' value='WBGCO' style='display:none;'>Wilbarger (COUNTY)</option>    <option class='lsOption' value='YKM' style='display:none;'>Yoakum (DISTRICT)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <input type="password" class="form-control input-lg" placeholder="Access Code" id="accessCode" disabled>
                                <div class="checkbox" id="agreementDiv" style="display:none;">
                                    <label style="font-size:.8em;"><input type="checkbox" id="userAgreement" style="cursor:pointer;">By agreeing to these terms and conditions, the user acknowledges that they understand this is a data submission by a third party process, and that the actual data maintained by the Texas Department of Transportation is not directly altered by these submissions. The user understands that all edits submitted via this application must be reviewed and accepted by Texas Department of Transportation. The Texas Department of Transportation makes no claim as to the accuracy of the information contained within this application.</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary btn-lg btn-block" id="signInButton" disabled>Sign In</button>
                                    <a id="needHelp" href="#">Need Help?</a>
                                    <div id="popHelp" style="display:none">
                                            <p><br>To acquire an access code, please contact TxDOT - Transportation, Planning, and Programming's Data Management Section at <a href="mailto:TPP-GIS@txdot.gov?Subject=RIU%20Access%20Code%20Request" target="_top" style="color:blue;">TPP-GIS@txdot.gov</a></p>
                                    </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="border:none;">
                        <div class="col-md-12"></div>    
                    </div>
                </div>
            </div>
        </div>

        
        <div id="divMap">
            <div id="menuContainer">
                <div id="menuPanel">
                    <div class="panel-group" id="accordion">
                        <div class="panel panel-default">
                            <div class="panel-heading btn-default" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" id="collapseOneHdr" style="cursor: pointer;">
                                <h4 class="panel-title">Edit</h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse in">
                                <div class="panel-body" style="text-align:center;">
                                    <!--<p>Edit the data stuff here. Template, edit tools, etc. Submits edit button which sends email?</p>-->
                                    <div id="editTemplate"></div>
                                    <br>
                                    <div id="legend"></div>
                                    <a href="./EditInstructions.pdf" target="EditInstructions" title="How to Edit"><button type="button" class="helpButton" id="editHelp">?</button></a>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading btn-default collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" style="cursor: pointer;">
                                <h4 class="panel-title">Download</h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse">
                                <div class="panel-body" style="text-align:center;">
                                    <p style="font-weight:bold;">Options</p>
                                    <p style="text-align:left;">1. Empty schema template shapefile<br>2. Copy of road inventory</p>
                                    <p style="font-size: xx-small;">Note: Downloading your the inventory in the Shapefile format may truncate field names.</p>
                                    <select class="form-control" id="chooseData">
                                        <option value="SCHEMA" selected>Schema Template</option> <option value="DATA">Road Inventory</option>  
                                    </select>
                                    <select class="form-control" id="downloadFormat"  disabled="disabled">
                                        <option value="SHP" selected>Shapefile</option>  <option value="FGDB">File Geodatabase</option> 
                                    </select>
                                    <button type="button" class="btn btn-default" id="download"><span class="glyphicon glyphicon-download-alt"></span> Download!</button>
                                    <div id="downloadMarquee" style="text-align:left;"></div>
                                    <a href="./DownloadInstructions.pdf" target="DownloadInstructions" title="How to Download"><button type="button" class="helpButton" id="downloadHelp">?</button></a>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading btn-default collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" style="cursor: pointer;">
                                <h4 class="panel-title">Upload</h4>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse">
                                <div class="panel-body" style="text-align:center;">
                                    <p style="font-weight:bold;text-align:center;">Options</p>
                                    <p>Upload a zipped (.zip) shapefile for:</p>
                                    <p style="text-align:left;">1. Temporary display<br>2. Bulk Inventory Submission</p>
                                    <div style='padding-left:4px;'><!-- swamp thang -->
                                        <p style="font-size: xx-small;">Help with <a target='_blank' style="color:blue;" href="http://doc.arcgis.com/en/arcgis-online/reference/shapefiles.htm">Shapefiles</a></p>
                                        <select class="form-control" id="chooseUpload">
                                            <option value="DISPLAY" selected>Temporary Display</option> <option value="UPLOAD">Bulk Submission</option>  
                                        </select>
                                        <form class="form-group" enctype="multipart/form-data" method="post" id="uploadForm">
                                            <div class="form-group">
                                                <span class="btn btn-default btn-file"><span class="glyphicon glyphicon-search"></span> Choose a File
                                                    <input type="file" name="file" id="uploadFile"/>
                                                </span>
                                            </div>
                                        </form>
                                        <span class="file-upload-status" style="opacity:1;text-align:left;" id="upload-status"></span>
                                        <div id="fileInfo" style="text-align:left;"></div>
                                        <div id="uploadMarquee" style="text-align:left;"></div>
                                        <button type="button" class="btn btn-default" id="clearDisplay" style="display:none;"><span class="glyphicon glyphicon-erase"></span> Clear Display</button>
                                        <a href="./UploadInstructions.pdf" target="UploadInstructions" title="How to Upload"><button type="button" class="helpButton" id="uploadHelp">?</button></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="panel panel-default">
                            <div class="panel-heading btn-default collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" id="collapseFourHdr" style="cursor: pointer;">
                                <h4 class="panel-title">Resources</h4>
                            </div>
                            <div id="collapseFour" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <div id="resources"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="homeBtn" type="button" class="btn btn-default"><span class="glyphicon glyphicon-home"></span></button>
            <button id="menuBtn" type="button" class="btn btn-default"><span id="menuArrow" class="glyphicon glyphicon-chevron-up"></span></button>
            <button id="logoff" type="button" class="btn btn-default">Log Off</button>
            <span id="user"></span>
            <span id="info"></span>
            <button id="basemapTrigger" type="button" class="btn btn-default"><span id="basemapArrow" class="glyphicon glyphicon-chevron-up"></span></button>
            <div id="basemapPanel">
                <div id="basemapContainer" class="container" style="width:100%;">
                    <div id="basemapGallery" class="row"></div>
                </div>
            </div> 
        </div>

    </body>
</html>
